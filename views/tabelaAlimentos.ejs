<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

<!DOCTYPE html>
<html lang="en">
<meta name="viewport" content="width=device-width, initial-scale=0.6">

<head>
    <!--Bootsrap 4 CDN-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!--Fontawesome CDN-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
        integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link href="/css/tabelaAlimentos.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="/imagens/apoioFratlogo.png" />
    <title>Tabela</title>
</head>

<body>
    <ul>
        <!--            <li><a href="/voluntarios/menuPrincipal">Menu Principal</a></li>
                        <li><a href="/admin/menu">Menu Administrador</a></li>
                        <li><a href="/admin/criarAlimento">Criar Alimento</a></li> -->
    </ul>

    <div class="table-data">
            <h2>Tabela Outros</h2>
            <table border="1">
                <tr>
                    <th>Produto</th>
                    <th>Capacidade</th>
                    <th></th>
                    <% for(var i=0 ; i <= rangeAnosValidade[0].maximo - rangeAnosValidade[0].minimo ; i++ ){ %>
                    <th colspan="12">
                            <%= rangeAnosValidade[0].minimo + i %>
                    </th>
                    <% } %>

                </tr> 
                    <tr>
                    <% var meses =["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]; %>

                    <td></td>
                    <td></td>
                    <td>Total</td>
                    <% for(var i=0 ; i <= rangeAnosValidade[0].maximo - rangeAnosValidade[0].minimo ; i++ ){ %>


                    <% for(var j=0 ; j < meses.length; j++ ){ %>
                    <td>
                        <%= meses[j] %>
                    </td>
                    <% } %>
                    <% } %>
                </tr>
                    <!-- loop de produtos inicio -->
                    <% for(var p=0 ; p < alimentoInventario.length ; p++ ){ %>
                    <tr>
                        <td>
                    <%= alimentoInventario[p].produto %>
                        </td>
                        <td>
                        <%= alimentoInventario[p].capacidade %>
                        </td>
                    <td>
                        <% if ( !(alimentoInventario[p].total == null) ) { %>
                            <%= alimentoInventario[p].total %>
                        <% }%>

                    </td>
                    <!-- loop de anos -->
                        <% for(var a=0 ; a <= rangeAnosValidade[0].maximo - rangeAnosValidade[0].minimo ; a++ ){ %>

                    <!-- loop de meses -->
                            <% for(var m=1 ; m <= 12 ; m++ ){ %>
                                <% var contador = 0; %>
                                <td>
                                <% for(var c=0 ; c < alimentoInventario[p].data.length ; c++ ){ %>
                                
                                    <% if ( !(alimentoInventario[p].data[c] == null) && alimentoInventario[p].data[c].getFullYear() == rangeAnosValidade[0].minimo+a && alimentoInventario[p].data[c].getMonth()+1 == m  ) { %>
                                        <% contador = contador + alimentoInventario[p].quantidade[c]; %>
                                    <% }%> 
                        <!-- loop de contagem para mes especifico -->
                                <% }%>
                                <% if (contador >0 ){ %>
                                    <%= contador %>
                                <% }%>
                            </td>

                        <!-- fim de loop de meses -->
                            <% }%>
                    <!-- fim de loop de anos -->
                        <% }%>

                    </tr>
                    <% }%>
                    <!-- fim de loop produtos-->

            </table>
    </div>
    <script src="/scripts/modules.js"></script>
</body>

</html>